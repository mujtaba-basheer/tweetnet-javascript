var MemberStack=window.MemberStack||{};window.addEventListener("load",async()=>{try{const a=new URLSearchParams(window.location.search),b=a.get("code"),c=a.get("state"),d=await MemberStack.onReady;if(d.loggedIn&&c&&b){const a=d.id,e=await fetch("https://api.tweetnest.io/api/auth/token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({state:c,code:b,mid:a})}),f=await e.json();if(f.status)localStorage.setItem("token",JSON.stringify(f.data)),window.location.href=`https://tweetnest.io/member/${a}`;else throw new Error}}catch(a){console.error(a)}});